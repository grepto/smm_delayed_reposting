# Отложенный постинг в Вконтакте: Фейсбук и Телеграм
Скрипт публикует пост с картинкой в группах соцсетей Вконтакте, Facebook и в Телеграм-канале.
План постов ведется в гугл-таблице
Тексты и изображения хранятся в гугл-драйве

## Предварительная подготовка
### Подготовьте таблицу с планом постов
Для работы скрипта нужно скопировать в свой гугл-драйв [эту таблицу](https://docs.google.com/spreadsheets/d/1xDPDVgsbQ1Mc8k9HX_bjVVnIIE2hHdNRTK-3uBC2e4o/edit?usp=sharing)
Чтобы скопировать таблицу, в меню `Файл` выберите пункт `Создать копию`. Когда на вашем диске создастся локальная копия таблицы,
скопируйте идентификатор таблицы из адресной строки. 
Например, в адресе https://docs.google.com/spreadsheets/d/abc1234567/edit#gid=0 идентификатор таблицы - `abc1234567`

Одна строка таблицы - один пост. 
 - В колонках социальных сетей поставьте `да` для каналов в которых хотите опубликовать пост
 - В колонках `День публикации` и `Время публикации` укажите нужный день и час когда пост должен быть опубликован.
   Поддерживаются только целые значения часов (10, 11, 22 и т.д.).
 - В колонку `Статья` вставьте ссылку на гугл-документ
 - В колонку `Картинки` вставьте ссылки изображение на гугл-диске
 - В колонку `Опубликовано` напишите `нет`. Когда пост опубликуется, значение в этой колонке автоматически сменится на `да`

### Зарегистрируйте приложение в Google API Console
Для работы с API гугл-диска и гугл-таблиц зарегистрировать приложение в консоле Google API Console и создать ключи доступа
 - Для гугл-таблиц нужно выполнить инструкуии первого шага из руководства [на этой странице](https://developers.google.com/sheets/api/quickstart/python)
 - Для гугл-диска нужно выполнить инструкции раздела `Authentication` [по этой ссылке](https://gsuitedevs.github.io/PyDrive/docs/build/html/quickstart.html#authentication)
В итоге, в папке проекта должны появиться файлы `credentials.json` и `client_secrets.json`

При первом запуске, приложение откроет браузер и попросит авторизовать себя в гугл-драйве и гугл-таблицах

### Зарегистрируйте переменные окружения
Для работы скрипта нужно зарегистрировать в операционной системе переменные окружения

- `VK_TOKEN` - токен приложения вконтакте через которое будет осуществляться постинг в группу
- `VK_LOGIN` - Номер телефона учетной записи Вконтакте в формате +7ХХХХХХХХХХ
- `VK_GROUP_ID` - Идентификатор группы в которую будут поститься комиксы
- `VK_ALBUM_ID` - Идентификатор альбома группы Вконтакте в который будут загружаться изображения (например 262348164)

- `TG_TOKEN` - Токен бота в телеграме
- `TG_CHAT_ID` - @Идентификатор телеграмм-чата (например @smmreposting)

- `FB_TOKEN` - Токен пользователя в Facebook
- `FB_GROUP_ID` - Идентификатор группы в Facebook (например 664865337260204)

- `SPREADSHEET_ID` - Идентификатор таблицы с планом постов. Берется из адреса скопированной таблицы. 
   Подробности в разделе подготовки.

### Как установить 
Используемые в проекте зависимости указаны в `requirements.txt`
Python3 должен быть уже установлен.
Затем используйте `pip` (или `pip3`, есть есть конфликт с Python2) для установки зависимостей:
```
pip install -r requirements.txt
```

### Как использовать
Запустить файл app.py. Запущенный скрипт раз в 5 минут опрашивает таблицу с планом постом и публикует те у которых день
и время совпадают с текущими.

Пример использования
```
python app.py
```

### Цель проекта
Код написан в образовательных целях на онлайн-курсе для веб-разработчиков dvmn.org.